<!DOCTYPE html>
<html>
<head>
    <title>PostHog Debug Test</title>
</head>
<body>
    <h1>PostHog Debug Test</h1>
    <button onclick="testPostHog()">Test PostHog Event</button>
    <div id="output"></div>

    <script>
        // Check if PostHog env vars are available
        const log = (msg) => {
            console.log(msg);
            document.getElementById('output').innerHTML += '<p>' + msg + '</p>';
        };

        // Log environment detection
        log('Checking PostHog configuration...');
        
        // In production, these would be replaced by Vite
        const POSTHOG_KEY = 'VITE_POSTHOG_KEY';  // This will be replaced by actual value
        const POSTHOG_HOST = 'VITE_POSTHOG_HOST'; // This will be replaced by actual value
        
        log('POSTHOG_KEY: ' + (POSTHOG_KEY.startsWith('phc_') ? 'VALID' : 'INVALID/MISSING'));
        log('POSTHOG_HOST: ' + POSTHOG_HOST);

        function testPostHog() {
            log('Testing PostHog event...');
            
            // Simple fetch test to PostHog
            const event = {
                event: 'debug_test',
                properties: {
                    timestamp: new Date().toISOString(),
                    test: true
                }
            };

            const url = `${POSTHOG_HOST}/capture/`;
            
            fetch(url, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({
                    api_key: POSTHOG_KEY,
                    event: event.event,
                    properties: event.properties,
                    distinct_id: 'debug-test-user'
                })
            })
            .then(response => {
                log('PostHog response status: ' + response.status);
                return response.text();
            })
            .then(data => {
                log('PostHog response: ' + data);
            })
            .catch(error => {
                log('PostHog error: ' + error.message);
            });
        }
    </script>
</body>
</html> 